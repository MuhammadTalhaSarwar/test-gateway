!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("tslib"),require("bind-decorator"),require("@qiwi/substrate")):"function"==typeof define&&define.amd?define(["exports","tslib","bind-decorator","@qiwi/substrate"],e):e((t||self).insideOutPromise={},t.tslib,t.bindDecorator,t.substrate)}(this,function(t,e,r,i){function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o,s=n(r);function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}).apply(this,arguments)}t.TPromiseState=void 0,(o=t.TPromiseState||(t.TPromiseState={})).PENDING="Pending",o.FULFILLED="Fulfilled",o.REJECTED="Rejected";var a,f,l,h,d=function(){},y=function(t,e){return Object.setPrototypeOf(t,e)},p=function(t,e){return new P(t,e)};Object.defineProperty(p,"Promise",{get:function(){return P.Promise},set:function(t){y(P.prototype,t.prototype),P.Promise=t}}),a=Symbol.toStringTag,f=Symbol.species,l=Symbol.species,h=Symbol.toStringTag;var P=function(){function e(r,i){this.state=t.TPromiseState.PENDING,this.value=void 0,this.reason=void 0,this._resolve=void 0,this._reject=void 0;var n=void 0,o=void 0,s=e.normalizeOpts(r,i),u=s.Promise,c=s.executor;return e.contextify(new u(function(t,e){n=t,o=e,c(t,e)}),{state:t.TPromiseState.PENDING,_P:u,_resolve:n,_reject:o})}var r,i,n,o=e.prototype;return o.resolve=function(t){return this._resolve(t),this},o.reject=function(t){return this._reject(t),this},o.then=function(t,r){return e.contextify(this,this,"then",t,r)},o.catch=function(t){return e.contextify(this,this,"catch",t)},o.finally=function(t){return this._P.prototype.finally?e.contextify(this,this,"finally",t):this.then(t).catch(t)},o.isPending=function(){return this.state===t.TPromiseState.PENDING},o.isFulfilled=function(){return this.state===t.TPromiseState.FULFILLED},o.isRejected=function(){return this.state===t.TPromiseState.REJECTED},o.isResolved=function(){return!this.isPending()},e.contextify=function(t,e,r){var i,n=r?(i=e._P.prototype[r]).call.apply(i,[t].concat([].slice.call(arguments,3))):t;return Object.assign(y(this.observe(n),this.prototype),e)},e.observe=function(e){var r=e.then(function(e){return Object.assign(r,{value:e,state:t.TPromiseState.FULFILLED}),e},function(e){throw Object.assign(r,{reason:e,state:t.TPromiseState.REJECTED}),e});return r},e.normalizeOpts=function(t,r){void 0===r&&(r={});var i="function"==typeof t?c({},r,{executor:t}):t||r;return c({Promise:e.Promise,executor:d},i)},r=e,n=[{key:l,get:function(){return Promise}},{key:h,get:function(){return this.name}}],(i=[{key:"promise",get:function(){return this}},{key:"status",get:function(){return this.state}},{key:"result",get:function(){return this.isFulfilled()?this.value:this.isRejected()?this.reason:void 0}},{key:a,get:function(){return this.constructor.name}},{key:f,get:function(){return Promise}}])&&u(r.prototype,i),n&&u(r,n),e}();P.Promise=Promise,e.__decorate([s.default],P.prototype,"resolve",null),e.__decorate([s.default],P.prototype,"reject",null),p.Promise=Promise,Object.defineProperty(t,"IPromise",{enumerable:!0,get:function(){return i.IPromise}}),t.InsideOutPromise=P,t.factory=p});
//# sourceMappingURL=inside-out-promise.umd.js.map
